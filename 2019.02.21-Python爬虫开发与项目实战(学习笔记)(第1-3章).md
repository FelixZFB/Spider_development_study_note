# Python爬虫开发与项目实战(学习笔记)

- 前面几章很多都是学习过的内容，快速浏览
- 参考书本和TLXY_study_note中的内容


# 1 第一章 回顾Python编程
- 案例放置在ch01之中

## 1.4 进程与线程

- 进程：程序运行的一个状态
    - 包含地址空间，内存，数据栈
    - 每个进程有自己独立的运行环境
    - 多进程共享数据是一个问题

- 线程
    - 一个线程的独立运行片段，一个进程可以有多个线程
    - 轻量化的进程
    - 一个进程的多个线程共享数据和上下文运行环境
    - 共享互斥问题

- 多进程使用multiprocessing模块
- 多线程使用threading模块
    
 
### 1.4.1 多进程
- 使用multiprocessing模块创建多进程
    - 使用multiprocessing模块中的Process创建少量的多进程
    - 参考实例1.4.1 

- 大量进程，上千上万个进程使用multiprocessing模块中的Pool类
    - 创建进程池对象
    - 进程池使用join()函数之前，需要先调用close()函数，关闭某个进程
    - 然后下一个进程在开始进程，具体参考实例
    - 参考实例1.4.2

- 进程之间的通信
    - 两个进程使用Pipe
    - 多个进程使用Queue
    - Queue有两个方法Put和Get
    - Put向进程队列中写入数据，按循序写入数据
    - Get从进进程队列中取出数据，按循序取出数据
    - 参考实例1.4.3/1.4.4
     
    
### 1.4.2 多线程
- threading模块
- 方法1：创建Thread实例
- 方法2：直接继承threading.Thread类
- 参考书中案例
- 参考TLXY_study_note中的高级语法，多线程

### 1.4.3 协程
- 可以使用yield生成器实现
- 推荐使用gevent包
- 参考实例1.4.5

- 处理大量的网络请求和并发出处理
- gevent提供的池，对并发数进行管理限制
- 使用pool.map执行任务
- 参考实例1.4.6

### 1.4.4 分布式进程
- multiprocessing模块
- 分布式进程的步骤
    - 建立队列Queue,负责进程之间的通信，任务队列task_queue,结果队列result_queue
    - 把第一步中的队列在网络中注册
    - 创建一个Queuemanager(BaseManager)的实例manager
    - 启动实例manager
    - 访问Queue对象
    - 创建任务到本地队列中，自动上传任务到网络队列中，分配给任务进程进行处理
    
- 先创建服务进程，再创建任务进程
- 参考实例1.4.7 1.4.8 运行出现错误
- 参考实例1.4.9 1.4.10 运行正常
    
## 1.5 网络编程
- TCP协议：服务器端与客户端要建立可靠的连接
- UDP协议：服务器端与客户端不需要建立连接
- 参考书本内容和TLXY_study_note中的高级语法，网络编程


# 2 第2章 Web前端基础
- 省略
- 参考书本内容和TLXY_study_note中的高级语法和Spider中的内容

# 3 第3章 初始网络爬虫
- 省略
- 参考书本内容和TLXY_study_note中的高级语法和Spider中的内容

# 4 第4章 HTML解析大法
- 省略
- Spider中有详细的BS4使用教程和案例
- 参考书本内容和TLXY_study_note中的高级语法和Spider中的内容

# 5 第5章 数据存储
## 5.1 HTML正文抽取
### 5.1.1 HTML内容存储为JSON格式
- 参考实例5.1.1 






